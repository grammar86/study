<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="TIMS">
    <meta name="author" content="TIMS">
    <!-- 2024-08-07 수정 및 추가-->
    <title>Risk Management 포털</title>
    <link rel="shortcut icon" href="./img/favicon.png">
    <!-- //2024-08-07 수정 및 추가-->

    <script src="../../js/jquery-1.11.1.min.js" type="text/javascript"></script>
    <link href="../../css/jquery-clockpicker.min.css" rel="stylesheet">
    <script src="../../js/jquery-clockpicker.min.js"></script>
    <link href="../../css/fontawesome/fontawesome.css" rel="stylesheet">
    
    <link rel="stylesheet" type="text/css" href="../../css/common.css">
    <link rel="stylesheet" type="text/css" href="../../css/default.css">
    <link rel="stylesheet" type="text/css" href="../../css/darkMode.css">
    <link rel="stylesheet" type="text/css" href="../../css/jquery.jqChart.css">
    <link rel="stylesheet" type="text/css" href="../../css/tims.css">
    
    <script src="../../js/jquery.jqChart.min.js" type="text/javascript"></script>
    
    <script src="../../js/modernizr.custom.js"></script>
    <script src="../../js/jquery-ui.js"></script>
    <script src="../../js/moment.js"></script>
    <script src="../../js/popper.min.js"></script>
    <script src="../../js/bootstrap.min.js"></script>

    <!-- datepicker -->
    <link href="../../css/bootstrap-datepicker3.css" rel="stylesheet" type="text/css">
    <script src="../../js/bootstrap-datepicker.js"></script>
    
    <link href="../../css/daterangepicker.css" rel="stylesheet" type="text/css">
    <script src="../../js/daterangepicker.js"></script>
    <script src="../../js/bootstrap-datepicker.ko.js"></script>
    
    <link href="../../css/bootstrap-timepicker.min.css" rel="stylesheet">
    <script src="../../js/bootstrap-timepicker.min.js"></script>
    
    <link type="text/css" href="../../css/toastr.css" rel="stylesheet">
    <script src="../../js/toastr.min.js"></script>

    <!-- slimscrollbar scrollbar JavaScript -->
    <script src="../../js/jquery.slimscroll.js"></script>
    <script src="../../js/jquery.cookie.js"></script>
    <script src="../../js/jquery.form.js"></script>
    <!--Wave Effects -->
    <script src="../../js/waves.js"></script>
    
    <!-- 2024-08 swiper -->
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <link rel="stylesheet" href="../../css/swiper.css"/>

    <!-- 공통 스크립트 -->
    <script src="../../js/common.js"></script>
    <script src="../../js/excel.js"></script>
    <script src="../../js/utils.js"></script>
    <script src="../../js/detail.js"></script>

    <!-- 2025-07 대시보드 -->
    <link rel="stylesheet" href="./dist/dashboard.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js" integrity="sha512-ElRFoEQdI5Ht6kZvyzXhYG9NqjtkmlkfYk0wr6wHxU9JEHakS7UJZNeml5ALk+8IKlU6jDgMabC3vkumRokgJA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chartjs-plugin-datalabels/2.2.0/chartjs-plugin-datalabels.min.js"></script>
</head>
<body>
    <header class="psm-header">
        <div class="section">
            <div class="d-flex justify-content-between">
                <div class="logo">
                    <h1><a href="/main.do"><i class="logo">PS&amp;M</i></a></h1>
                </div>
            </div>
        </div>
    </header>
    <main class="psm-dashboard">
        <div class="container" id="container">
            <div class="oldLayout">
                <div class="row">
                    <div class="col main-info color1">
                        <h5>진단대상</h5>
                        <p class="infoText">112,893</p>
                    </div>
                    <div class="col main-info color2">
                        <h5>양호</h5>
                        <p class="infoText">112,893</p>
                    </div>
                    <div class="col main-info color3">
                        <h5>경고</h5>
                        <p class="infoText">112,893</p>
                    </div>

                    <div class="col main-info color4">
                        <h5>취약</h5>
                        <p class="infoText">112,893</p>
                    </div>
                </div>
            </div>

            <!-- 신규 대시보드 포맷 -->
            <div class="dashboardItems">
                <div class="dashboard-wrap view-mode">
                    <!-- 기술적 취약점 종합 -->
                    <div class="dashboard-box">
                        <h2><a href="#">기술적 취약점 종합</a></h2>
                        <div class="box-cont flex">
                            <div class="chart-container">
                                <canvas id="donutChart" width="400" height="400"></canvas>
                                <div class="center-text" style="margin-left:0;">
                                    <h2 id="totalValue">34점</h2>
                                    <p>취약</p>
                                </div>
                            </div>
                            <div class="chart-progress-box">
                                <h2>진단 완료/미완료</h2>
                                <p class="number">7/17</p>

                                <ul class="labels">
                                    <li>
                                        
                                        <div class="text-box">
                                            <p class="tit">양호</p>
                                            <p class="count"><strong>1</strong>건(4%)</p>
                                        </div>
                                        <div class="progress bg1">
                                            <span style="width:4%;"></span>
                                        </div>
                                    </li>
                                    <li>
                                        
                                        <div class="text-box">
                                            <p class="tit">경고</p>
                                            <p class="count"><strong>1</strong>건(4%)</p>
                                        </div>
                                        <div class="progress bg2">
                                            <span style="width:4%;"></span>
                                        </div>
                                    </li>
                                    <li>
                                        
                                        <div class="text-box">
                                            <p class="tit">취약</p>
                                            <p class="count"><strong>22</strong>건(91%)</p>
                                        </div>
                                        <div class="progress bg3">
                                            <span style="width:91%;"></span>
                                        </div>
                                    </li>
                                </ul>
                            </div>
                        </div>
                        <script>
                            $(function(){
                                setTimeout(function(){
                                    donutChart1();
                                },10)
                            });
                        </script>
                    </div>
                    <!-- //기술적 취약점 종합 -->

                    <!-- 기술적 취약점 상세 -->
                    <div class="dashboard-box">
                        <h2><a href="#">기술적 취약점 상세</a></h2>

                        <div class="box-cont">
                            <canvas id="barChart1"></canvas>
                        </div>
                        
                        <script>
                            $(function(){
                                setTimeout(function(){
                                    barChart1();
                                },10)
                            });
                        </script>
                    </div>
                    <!-- //기술적 취약점 상세 -->

                    <!-- 위험도별 보안 준수 현황 -->
                    <div class="dashboard-box">
                        <h2><a href="#">위험도별 보안 준수 현황</a></h2>

                        <div class="box-cont">
                            <canvas id="barChart2"></canvas>
                        </div>
                        
                        <script>
                            $(function(){
                                setTimeout(function(){
                                    barChart2();
                                },10)
                            });
                        </script>
                    </div>
                    <!-- //위험도별 보안 준수 현황 -->

                    <!-- 분류별 보안 현황 -->
                    <div class="dashboard-box w-type2" >
                        <h2><a href="#">분류별 보안 현황</a></h2>

                        <div class="flex">
                            <select class="form-control">
                                <option value="1">Linux</option>
                            </select>
                        </div>

                        <div class="box-cont">

                            <div class="flex mb-0">
                                <div style="width:70%;">
                                    <canvas id="radarChart2" height="280"></canvas>
                                </div>
                                <div style="width:30%;">
                                    <table class="dashboard-table p-type1">
                                        <caption>분류별 보안 현황</caption>
                                        <colgroup>
                                            <col style="width:130px;">
                                            <col style="width:35px;">
                                        </colgroup>
                                        <thead>
                                            <tr>
                                                <th scope="col">분류</th>
                                                <th scope="col">점수</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>계정관리</td>
                                                <td>62</td>
                                            </tr>
                                            <tr>
                                                <td>계정관리</td>
                                                <td>62</td>
                                            </tr>
                                            <tr>
                                                <td>계정관리</td>
                                                <td>62</td>
                                            </tr>
                                            <tr>
                                                <td>계정관리</td>
                                                <td>62</td>
                                            </tr>
                                            <tr>
                                                <td>계정관리</td>
                                                <td>62</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                        
                        <script>
                            $(function(){
                                setTimeout(function(){
                                    radarChart2();
                                },10)
                            });
                        </script>
                    </div>
                    <!-- //분류별 보안 현황 -->

                    <!-- 취약점 발생 상위 항목 -->
                    <div class="dashboard-box w-type2">
                        <h2><a href="#">취약점 발생 상위 항목</a></h2>

                        <div class="box-cont">
                            <table class="dashboard-table p-type2">
                                <caption>취약점 발생 상위 항목</caption>
                                <colgroup>
                                    <col style="width:93px;">
                                    <col>
                                    <col style="width:75px;">
                                </colgroup>
                                <thead>
                                    <tr>
                                        <th scope="col">분류</th>
                                        <th scope="col">항목</th>
                                        <th scope="col">건수</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>계정관리</td>
                                        <td><p class="ellipsis">계정 잠금 임계값 설정</p></td>
                                        <td>6건</td>
                                    </tr>
                                    <tr>
                                        <td>계정관리</td>
                                        <td><p class="ellipsis">계정 잠금 임계값 설정</p></td>
                                        <td>6건</td>
                                    </tr>
                                    <tr>
                                        <td>계정관리</td>
                                        <td><p class="ellipsis">계정 잠금 임계값 설정</p></td>
                                        <td>6건</td>
                                    </tr>
                                    <tr>
                                        <td>계정관리</td>
                                        <td><p class="ellipsis">계정 잠금 임계값 설정</p></td>
                                        <td>6건</td>
                                    </tr>
                                    <tr>
                                        <td>계정관리</td>
                                        <td><p class="ellipsis">계정 잠금 임계값 설정</p></td>
                                        <td>6건</td>
                                    </tr>
                                    <tr>
                                        <td>계정관리</td>
                                        <td><p class="ellipsis">계정 잠금 임계값 설정</p></td>
                                        <td>6건</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <!-- //취약점 발생 상위 항목 -->
                </div>
            </div>


        </div>
    </main>


    <!-- 차트 플러그인 불러오기 -->
    <script>
        const donutChart1 = function(){
            // 차트 데이터
            const data = {
                labels: ['양호', '경고', '취약'],
                datasets: [{
                    data: [30, 25, 20],
                    backgroundColor: [
                        '#15E336',
                        '#FF792E',
                        '#FFCC16'
                    ],
                    borderWidth: 0,
                    hoverOffset: 10
                }]
            };

            // 차트 설정
            const config = {
                type: 'doughnut',
                data: data,
                plugins: [ChartDataLabels],
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    cutout: '70%', // 도넛 구멍 크기
                    plugins: {
                        legend: {
                            position: 'none',
                        },
                        datalabels: {
                            display: true,
                            color: 'white',
                            font: {
                                size: 14
                            },
                        }
                    },
                    animation: {
                        animateScale: true,
                        animateRotate: true,
                        duration: 1500,
                        easing: 'easeInOutQuart'
                    },
                    hover: {
                        animationDuration: 300
                    },
                }
            };

            // 차트 생성
            const ctx = document.getElementById('donutChart').getContext('2d');
            const donutChart = new Chart(ctx, config);
        }
    
        const barChart1 = function(){
            // 차트 설정
            const ctx = document.getElementById('barChart1').getContext('2d');
            let isHorizontal = false;
            
            // 초기 데이터
            const initialData = {
                labels: ['Linux', 'Windows', 'Network', 'DBMS', 'WEB/WAS', 'Security'],
                datasets: [{
                    data: [85,70,35,85,70,35],
                    backgroundColor:'#05A2FA'
                }]
            };
            
            // 차트 옵션
            const options = {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: false // 커스텀 범례 사용
                    },
                    datalabels: {
                        display: true,
                        color: '#333',           // 텍스트 색상
                        anchor: 'end',          // 막대의 끝에 위치
                        align: 'top',           // 막대 위쪽에 표시
                        font: {
                            size: 12,
                            weight: 'bold'
                        },
                        formatter: (value) => {
                            return value;       // 값 그대로 표시 (% 등 추가 가능)
                        }
                    }
                },
                scales: {
                    x: {
                        beginAtZero: true,
                        grid: {
                            color: 'rgba(0, 0, 0, 0.1)',
                            lineWidth: 1
                        },
                        ticks: {
                            color: '#666',
                            font: {
                                size: 12,
                                weight: 'bold'
                            }
                        }
                    },
                    y: {
                        beginAtZero: true,
                        max: 100,
                        grid: {
                            color: 'rgba(0, 0, 0, 0.1)',
                            lineWidth: 1
                        },
                        ticks: {
                            color: '#666',
                            font: {
                                size: 12
                            },
                            display: true // 수치 숨김
                        }
                    }
                },
                animation: {
                    duration: 1000,
                    easing: 'easeOutQuart'
                },
                interaction: {
                    intersect: false
                },
                hover: {
                    animationDuration: 200
                },
                categoryPercentage: 0.5,
                barPercentage: 0.7
            };
            
            // 차트 생성
            let barChart = new Chart(ctx, {
                type: 'bar',
                data: JSON.parse(JSON.stringify(initialData)),
                plugins: [ChartDataLabels],
                options: options
            });
        }

        const barChart2 = function(){
            // 차트 설정
            const ctx = document.getElementById('barChart2').getContext('2d');
            let isHorizontal = false;
            
            // 초기 데이터
            const initialData = {
                labels: ['상', '중', '하'],
                datasets: [{
                    data: [85,70,35],
                    backgroundColor:['#FB3A51','#05A2FA','#15E336']
                }]
            };
            
            // 차트 옵션
            const options = {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: false // 커스텀 범례 사용
                    },
                    datalabels: {
                        display: true,
                        color: '#333',           // 텍스트 색상
                        anchor: 'end',          // 막대의 끝에 위치
                        align: 'top',           // 막대 위쪽에 표시
                        font: {
                            size: 12,
                            weight: 'bold'
                        },
                        formatter: (value) => {
                            return value + '%';       // 값 그대로 표시 (% 등 추가 가능)
                        }
                    }
                },
                scales: {
                    x: {
                        beginAtZero: true,
                        grid: {
                            color: 'rgba(0, 0, 0, 0.1)',
                            lineWidth: 1
                        },
                        ticks: {
                            color: '#666',
                            font: {
                                size: 12,
                                weight: 'bold'
                            }
                        }
                    },
                    y: {
                        beginAtZero: true,
                        max: 100,
                        grid: {
                            color: 'rgba(0, 0, 0, 0.1)',
                            lineWidth: 1
                        },
                        ticks: {
                            color: '#666',
                            font: {
                                size: 12
                            },
                            display: true // 수치 숨김
                        }
                    }
                },
                animation: {
                    duration: 1000,
                    easing: 'easeOutQuart'
                },
                interaction: {
                    intersect: false
                },
                hover: {
                    animationDuration: 200
                },
                categoryPercentage: 0.5,
                barPercentage: 0.7
            };
            
            // 차트 생성
            let barChart = new Chart(ctx, {
                type: 'bar',
                data: JSON.parse(JSON.stringify(initialData)),
                plugins: [ChartDataLabels],
                options: options
            });
        }
    
        const radarChart2 = function(){
            const ctx = document.getElementById('radarChart2').getContext('2d');
            
            const radarChart = new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: ['로그 관리', '계정관리', '파일 및 디렉토리 관리', '서비스 관리', '패치 관리'],
                    datasets: [
                        {
                            data: [350, 400, 300, 380, 320],
                            backgroundColor: 'rgba(22, 119, 255, 0.3)',
                            borderColor: '#1677FF',
                            borderWidth: 1,
                            pointRadius: 0,
                            pointHoverRadius: 0
                        },
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio:false,
                    plugins: {
                        legend: {
                            display: false,
                        }
                    },
                    scales: {
                        r: {
                            ticks: {
                                display:false
                            },
                            beginAtZero: true,
                            grid: {
                                color: 'rgba(200, 200, 200, 0.3)'
                            },
                            angleLines: {
                                color: 'rgba(200, 200, 200, 0.3)'
                            }
                        }
                    },
                    elements: {
                        line: {
                            borderWidth: 2
                        },
                        point: {
                            radius: 4,
                            hoverRadius: 6
                        }
                    }
                }
            });
        }

    </script>
    <!-- //차트 플러그인 불러오기 -->


</body>
</html>